# FlowerDelivery
## Магазин цветов

FlowerDelivery – это полнофункциональное веб-приложение на Django для заказа доставки цветов с интеграцией уведомлений через Telegram-бота. Проект позволяет как частным лицам, так и компаниям регистрироваться, просматривать каталог цветов, добавлять товары в корзину и оформлять заказы. Заказами можно управлять через административный интерфейс, а специальный Telegram-бот отправляет уведомления об оформлении заказа и изменении его статуса.

## Содержание

- [Особенности](#особенности)
- [Технологии](#технологии)
- [Структура проекта](#структура-проекта)
- [Установка](#установка)
- [Запуск проекта](#запуск-проекта)
- [Интеграция Telegram-бота](#интеграция-telegram-бота)
- [Лицензия](#лицензия)

## Особенности

- **Регистрация и авторизация:** Пользователи могут зарегистрироваться (с указанием email, телефона и типа пользователя), войти в систему и управлять своим профилем.
- **Каталог и корзина:** Возможность просматривать каталог товаров (цветов), добавлять их в корзину, изменять количество и просматривать итоговую стоимость.
- **Оформление заказа:** При оформлении заказа заказ привязывается к учетной записи пользователя независимо от введенных данных в форму.
- **История заказов:** Зарегистрированные пользователи могут просматривать историю своих заказов.
- **Административный интерфейс:** Предоставляется страница для управления заказами, где администратор может обновлять статус заказа.
- **Интеграция с Telegram:** Telegram-бот, реализованный с использованием Aiogram, отправляет уведомления пользователям:
  - **Уведомление об оформлении заказа:** При размещении заказа отправляется сообщение с  информацией о заказе( итоговая цена, статус заказа)
  - **Уведомление об изменении статуса заказа:** При обновлении статуса заказа администратором отправляется уведомление.
- **Адаптивный дизайн:** Используется Bootstrap (через CDN) для современного адаптивного интерфейса.
- **Аккаунт администратора:** для смены статуса заказа. Логин при регистрации администратора должен быть обязательно: admin и любой пароль. 
## Технологии

- **Backend:** Django 5.1.6, Django REST Framework
- **База данных:** SQLite3 (база данных расположена в отдельной папке `db`)
- **Frontend:** HTML, CSS, Bootstrap 5 (через CDN)
- **Telegram-бот:** Python, Aiogram 3, Requests
- **Асинхронные утилиты:** asgiref (sync_to_async)

```plaintext
FlowerDelivery/
│
├── bot/
│   ├── config.py           # Конфигурация бота (BOT_TOKEN, BOT_USERNAME)
│   └── main.py             # Основной файл запуска Telegram-бота
│
├── db/                     # Папка с файлом базы данных SQLite3
│   └── db.sqlite3
│
├── website/
│   │   └── media/ 
│   │         ├──products/  # Папка для хранения изображений товаров
│   ├── manage.py           # Файл управления Django
│   ├── website/            # Основная папка проекта Django
│   │   ├── __init__.py
│   │   ├── settings.py     # Настройки Django (включая настройки для Telegram-бота)
│   │   ├── urls.py         # Конфигурация URL проекта
│   │   └── wsgi.py         # WSGI-конфигурация
│   │
│   └── shop/               # Приложение магазина
│       ├── __init__.py
│       ├── admin.py        # Конфигурация админки Django
│       ├── apps.py         # Конфигурация приложения (например, ShopConfig)
│       ├── models.py       # Модели: CustomUser, Product, Cart, Order, OrderItem и т.д.
│       ├── views.py        # Основные представления: каталог, корзина, оформление заказа, профиль
│       ├── forms.py        # Формы для регистрации пользователей и оформления заказа               
│       └── templates/
│               ├── base.html        # Базовый шаблон (общая структура)
│               ├── footer.html      # Подвал сайта
│               ├── navbar.html      # Навигационное меню
│               ├── index.html       # Главная страница
│               ├── catalog.html     # Страница каталога товаров
│               ├── cart.html        # Страница корзины
│               ├── checkout.html    # Страница оформления заказа
│               ├── profile.html     # Страница профиля пользователя
│               ├── adminpage.html   # Страница административной панели
│               ├── login.html       # Страница входа
│               └── register.html    # Страница регистрации
│
└── requirements.txt        # Список зависимостей Python

## Установка
Клонируйте репозиторий:
git clone https://github.com/Jeff555max/FlowerDelivery.git
cd FlowerDelivery

Создайте виртуальное окружение и установите зависимости:
python -m venv .venv
source .venv/bin/activate  # На Windows: .venv\Scripts\activate
pip install -r requirements.txt

Примените миграции:
python website/manage.py migrate

Создайте суперпользователя (для админки Django):
python website/manage.py createsuperuser

## Запуск проекта
Запуск Django-сервера:
python website/manage.py runserver

## Запуск Telegram-бота:
Откройте новый терминал, активируйте виртуальное окружение и запустите:
python bot/main.py

## Интеграция Telegram-бота
Конфигурация бота:
Укажите токен и имя бота в файле bot/config.py.

Привязка аккаунта:
В профиле пользователя на сайте генерируется уникальная ссылка для привязки Telegram-бота:
telegram_bot_url = f"https://t.me/{settings.TELEGRAM_BOT_USERNAME}?start={request.user.id}"
Пользователь переходит по этой ссылке, чтобы связать свою учетную запись с Telegram.

## Уведомления:

При оформлении заказа:

После оформления заказа бот отправляет уведомление c информацией о заказе.

При изменении статуса заказа: 

При изменении статуса заказа администратором бот отправляет уведомление.

## Лицензия

Этот проект лицензирован по MIT License.
